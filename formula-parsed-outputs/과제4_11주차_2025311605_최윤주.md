**11주차 실습 (과제4)**

**데이터베이스 구축**

**학과 \_\_\_디지털애널리틱스\_\_\_\_\_\_  학기 \_2\_\_\_\_  학번 2025311605\_  성명 \_최윤주\_**

1. **호텔 데이터베이스 모델링 및 구축**

지점이 여러 개인 호텔을 데이터베이스로 구축하려고 한다. 다음 내용을 모두 포함하는 데이터베이스를 설계하세요.필요한 경우 몇 가지 가정을 넣을 수 있다.

① 각 호텔 지점은 이름, 주소, 도시, 각 타입 방의 가격, 각 타입 방의 수 등의 정보를 가지고 있다.

② 고객은 이름, 주소, 전화번호 정보를 가지고 있다. 고객은 하루 혹은 며칠 동안 호텔을 예약할 수 있

다. 예약 시 투숙객의 수, 예약일, 출발일, 도착일을 저장한다.

③ 투숙 후 실제 투숙의 도착일, 출발일, 선급금, 지불방법을 저장한다.

1. ER 다이어그램을 피터첸 표기법으로 작성하세요.
![Image](과제4_11주차_2025311605_최윤주/images/pictures_0.png)
2. ER 다이어그램을 테이블로 변환하세요.

HOTEL\_BRANCH(

branch\_id      PK,

name,

address,

city

)

ROOM\_TYPE(

room\_type\_id   PK,

branch\_id      FK → HOTEL\_BRANCH(branch\_id),

type\_name,

price,

num\_rooms

)

CUSTOMER(

customer\_id    PK,

name,

address,

phone

)

RESERVATION(

reservation\_id PK,

customer\_id    FK → CUSTOMER(customer\_id),

branch\_id      FK → HOTEL\_BRANCH(branch\_id),

room\_type\_id   FK → ROOM\_TYPE(room\_type\_id),

num\_guests,      -- 투숙객 수

reserve\_date,    -- 예약일

checkin\_date,    -- (예약상) 도착일

checkout\_date    -- (예약상) 출발일

)

STAY(

reservation\_id PK, FK → RESERVATION(reservation\_id),

actual\_checkin\_date,

actual\_checkout\_date,

deposit,

payment\_method

)

1. MySQL Workbench에서 물리ERD를 작성하세요.
![Image](과제4_11주차_2025311605_최윤주/images/pictures_1.png)
2. hotel 데이터베이스를 생성하여 테이블을 생성하세요.(create문 작성)

-- 1) 데이터베이스 생성

CREATE DATABASE IF NOT EXISTS hotel;

USE hotel;

-- 2) 호텔 지점 테이블

CREATE TABLE HOTEL\_BRANCH (

branch\_id      INT UNSIGNED AUTO\_INCREMENT PRIMARY KEY,

name           VARCHAR(100) NOT NULL,   -- 지점 이름

address        VARCHAR(200),            -- 주소

city           VARCHAR(50)              -- 도시

);

-- 3) 객실 타입 테이블

CREATE TABLE ROOM\_TYPE (

room\_type\_id   INT UNSIGNED AUTO\_INCREMENT PRIMARY KEY,

branch\_id      INT UNSIGNED NOT NULL,   -- 어느 지점의 방 타입인지

type\_name      VARCHAR(50) NOT NULL,    -- 싱글, 더블 등

price          DECIMAL(10,2) NOT NULL,  -- 1박 가격

num\_rooms      INT UNSIGNED NOT NULL,   -- 해당 타입 방 개수

CONSTRAINT fk\_roomtype\_branch

FOREIGN KEY (branch\_id)

REFERENCES HOTEL\_BRANCH(branch\_id)

ON DELETE CASCADE

);

-- 4) 고객 테이블

CREATE TABLE CUSTOMER (

customer\_id    INT UNSIGNED AUTO\_INCREMENT PRIMARY KEY,

name           VARCHAR(100) NOT NULL,

address        VARCHAR(200),

phone          VARCHAR(20)

);

-- 5) 예약 테이블

CREATE TABLE RESERVATION (

reservation\_id INT UNSIGNED AUTO\_INCREMENT PRIMARY KEY,

customer\_id    INT UNSIGNED NOT NULL,   -- 어떤 고객이

branch\_id      INT UNSIGNED NOT NULL,   -- 어떤 지점에

room\_type\_id   INT UNSIGNED NOT NULL,   -- 어떤 방 타입을

num\_guests     INT UNSIGNED NOT NULL,   -- 투숙객 수

reserve\_date   DATE NOT NULL,           -- 예약일

checkin\_date   DATE NOT NULL,           -- 예약 도착일

checkout\_date  DATE NOT NULL,           -- 예약 출발일

CONSTRAINT fk\_res\_customer

FOREIGN KEY (customer\_id)

REFERENCES CUSTOMER(customer\_id),

CONSTRAINT fk\_res\_branch

FOREIGN KEY (branch\_id)

REFERENCES HOTEL\_BRANCH(branch\_id),

CONSTRAINT fk\_res\_roomtype

FOREIGN KEY (room\_type\_id)

REFER

1. 생성한 테이블에 데이터를 추가하세요.

![Image](과제4_11주차_2025311605_최윤주/images/pictures_2.png)

![Image](과제4_11주차_2025311605_최윤주/images/pictures_3.png)

![Image](과제4_11주차_2025311605_최윤주/images/pictures_4.png)

![Image](과제4_11주차_2025311605_최윤주/images/pictures_5.png)

![Image](과제4_11주차_2025311605_최윤주/images/pictures_6.png)

1. **한국 쇼핑몰 데이터베이스 구축**
1. 다음은 한국 쇼핑몰의 개념 데이터 모델과 논리 데이터 모델이다. MySQL Workbench에서 koreashop 데이터베이스를 생성하고 물리ERD를 작성하세요.
<!-- image -->

![Image](과제4_11주차_2025311605_최윤주/images/pictures_8.png)

![Image](과제4_11주차_2025311605_최윤주/images/pictures_9.png)

1. 테이블을 생성하고 SQL문을 작성하세요.
| 데이터베이스 조회 show databases  데이터베이스 생성 create database koreashop  데이터베이스 삭제 drop database koreashop  사용할 데이터베이스 선택 use koreashop   | 테이블 삭제 : 제약조건이 있는 테이블 먼저 삭제함  DROP TABLE order\_list  DROP TABLE product;  DROP TABLE user   |
|---------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------|

![Image](과제4_11주차_2025311605_최윤주/images/pictures_10.png)

![Image](과제4_11주차_2025311605_최윤주/images/pictures_11.png)

1. 아래와 같이 CRUD를 실습하여 본인의 그림으로 대체하세요.
2. C - 데이터 생성 : INSERT INTO [테이블명](컬럼명,컬럼명,….) VALUES(값,값,…);
3. R - 데이터 조회 : SELECT * FROM [테이블명]; SELECT [컬럼명,…] FROM [테이블명]
4. U - 데이터 변경 : UPDATE [테이블명] SET [컬럼명]=[수정할 값] WHERE [조건];
5. D - 데이터 삭제 : DELETE FROM [테이블명] WHERE [조건];
![Image](과제4_11주차_2025311605_최윤주/images/pictures_12.png)

![Image](과제4_11주차_2025311605_최윤주/images/pictures_13.png)

![Image](과제4_11주차_2025311605_최윤주/images/pictures_14.png)

![Image](과제4_11주차_2025311605_최윤주/images/pictures_15.png)

1. 아래의 내용을 파이썬으로 실행하여 HTML 화면으로 출력하세요. 실행한 화면을 캡쳐한 내용, SQL Script, 파이썬 코드, HTML 등 모든 소스 파일을 아래에 작성하세요
![Image](과제4_11주차_2025311605_최윤주/images/pictures_16.png)

USE koreashop;

-- 유저 테이블

CREATE TABLE user (

user\_id   VARCHAR(20) PRIMARY KEY,

user\_name VARCHAR(50)

);

-- 상품 테이블

CREATE TABLE product (

product\_id   VARCHAR(20) PRIMARY KEY,

product\_name VARCHAR(50),

price        INT

);

-- 주문 테이블

CREATE TABLE order\_list (

order\_id     VARCHAR(20),

user\_id      VARCHAR(20),

product\_id   VARCHAR(20),

product\_qty  INT,

sub\_total    INT,

create\_time  DATETIME

);

-- 데이터 입력

INSERT INTO user VALUES

('ansebyby1','안명정1'),

('ansebyby2','안명정2'),

('ansebyby3','안명정3'),

('korea1','김고객1'),

('korea2','김고객2');

INSERT INTO product VALUES

('p1','컴퓨터1',1000000),

('p2','키보드3',50000),

('p3','모니터1',200000),

('p4','모니터2',300000),

('p5','마우스3',50000);

INSERT INTO order\_list VALUES

('000001','ansebyby1','p1',1,1000000,'2019-03-20 06:49:33'),

('000001','ansebyby1','p2',1,50000,'2019-03-20 06:49:33'),

('000001','ansebyby3','p3',2,400000,'2019-03-20 06:50:10'),

('000001','korea1','p4',2,600000,'2019-03-20 06:51:54'),

('000001','korea1','p5',2,50000,'2019-03-20 06:51:54');

파이썬 코드

import pymysql

import webbrowser

# DB 연결

conn = pymysql.connect(

host='localhost',

user='root',

password='비밀번호입력',

db='koreashop',

charset='utf8'

)

cursor = conn.cursor()

sql = """

SELECT

o.order\_id,

o.user\_id,

u.user\_name,

p.product\_name,

o.product\_qty,

o.sub\_total,

o.create\_time

FROM order\_list o

JOIN user u ON o.user\_id = u.user\_id

JOIN product p ON o.product\_id = p.product\_id

ORDER BY o.create\_time;

"""

cursor.execute(sql)

rows = cursor.fetchall()

# HTML 테이블 작성

html = """

&lt;!DOCTYPE html&gt;

&lt;html&gt;

&lt;head&gt;

&lt;meta charset='UTF-8'&gt;

&lt;title&gt;주문 내역&lt;/title&gt;

&lt;style&gt;

table { border-collapse: collapse; width: 100%; }

th, td { border: 1px solid black; padding: 8px; text-align: center; }

th { background-color: #f2f2f2; }

&lt;/style&gt;

&lt;/head&gt;

&lt;body&gt;

&lt;h2&gt;주문 내역&lt;/h2&gt;

&lt;table&gt;

&lt;tr&gt;

&lt;th&gt;order\_id&lt;/th&gt;

&lt;th&gt;user\_id&lt;/th&gt;

&lt;th&gt;user\_name&lt;/th&gt;

&lt;th&gt;product\_name&lt;/th&gt;

&lt;th&gt;product\_qty&lt;/th&gt;

&lt;th&gt;sub\_total&lt;/th&gt;

&lt;th&gt;create\_time&lt;/th&gt;

&lt;/tr&gt;

"""

for row in rows:

html += "&lt;tr&gt;"

for col in row:

html += f"&lt;td&gt;{col}&lt;/td&gt;"

html += "&lt;/tr&gt;"

html += """

&lt;/table&gt;

&lt;/body&gt;

&lt;/html&gt;

"""

# 파일로 저장

with open("order.html", "w", encoding="utf8") as f:

f.write(html)

# 자동으로 브라우저에서 열기

webbrowser.open("order.html")

# DB 종료

cursor.close()

conn.close()

3. HTML

&lt;!DOCTYPE html&gt;

&lt;html&gt;

&lt;head&gt;

&lt;meta charset="UTF-8"&gt;

&lt;title&gt;주문 내역&lt;/title&gt;

&lt;style&gt;

body { font-family: Arial, sans-serif; margin: 20px; }

table { border-collapse: collapse; width: 100%; }

th, td {

border: 1px solid #333;

padding: 8px;

text-align: center;

}

th {

background-color: #eeeeee;

font-weight: bold;

}

h2 { margin-bottom: 15px; }

&lt;/style&gt;

&lt;/head&gt;

&lt;body&gt;

&lt;h2&gt;주문 내역 (샘플)&lt;/h2&gt;

&lt;table&gt;

&lt;tr&gt;

&lt;th&gt;order\_id&lt;/th&gt;

&lt;th&gt;user\_id&lt;/th&gt;

&lt;th&gt;user\_name&lt;/th&gt;

&lt;th&gt;product\_name&lt;/th&gt;

&lt;th&gt;product\_qty&lt;/th&gt;

&lt;th&gt;sub\_total&lt;/th&gt;

&lt;th&gt;create\_time&lt;/th&gt;

&lt;/tr&gt;

&lt;tr&gt;

&lt;td&gt;000001&lt;/td&gt;

&lt;td&gt;ansebyby1&lt;/td&gt;

&lt;td&gt;안명정1&lt;/td&gt;

&lt;td&gt;컴퓨터1&lt;/td&gt;

&lt;td&gt;1&lt;/td&gt;

&lt;td&gt;1000000&lt;/td&gt;

&lt;td&gt;2019-03-20 06:49:33&lt;/td&gt;

&lt;/tr&gt;

&lt;tr&gt;

&lt;td&gt;000001&lt;/td&gt;

&lt;td&gt;ansebyby1&lt;/td&gt;

&lt;td&gt;안명정1&lt;/td&gt;

&lt;td&gt;키보드3&lt;/td&gt;

&lt;td&gt;1&lt;/td&gt;

&lt;td&gt;50000&lt;/td&gt;

&lt;td&gt;2019-03-20 06:49:33&lt;/td&gt;

&lt;/tr&gt;

&lt;tr&gt;

&lt;td&gt;000001&lt;/td&gt;

&lt;td&gt;ansebyby3&lt;/td&gt;

&lt;td&gt;안명정3&lt;/td&gt;

&lt;td&gt;모니터1&lt;/td&gt;

&lt;td&gt;2&lt;/td&gt;

&lt;td&gt;400000&lt;/td&gt;

&lt;td&gt;2019-03-20 06:50:10&lt;/td&gt;

&lt;/tr&gt;

&lt;tr&gt;

&lt;td&gt;000001&lt;/td&gt;

&lt;td&gt;korea1&lt;/td&gt;

&lt;td&gt;김고객1&lt;/td&gt;

&lt;td&gt;모니터2&lt;/td&gt;

&lt;td&gt;2&lt;/td&gt;

&lt;td&gt;600000&lt;/td&gt;

&lt;td&gt;2019-03-20 06:51:54&lt;/td&gt;

&lt;/tr&gt;

&lt;tr&gt;

&lt;td&gt;000001&lt;/td&gt;

&lt;td&gt;korea1&lt;/td&gt;

&lt;td&gt;김고객1&lt;/td&gt;

&lt;td&gt;마우스3&lt;/td&gt;

&lt;td&gt;2&lt;/td&gt;

&lt;td&gt;50000&lt;/td&gt;

&lt;td&gt;2019-03-20 06:51:54&lt;/td&gt;

&lt;/tr&gt;

&lt;/table&gt;

&lt;/body&gt;

&lt;/html&gt;

4. 화면캡쳐

![Image](과제4_11주차_2025311605_최윤주/images/pictures_17.png)